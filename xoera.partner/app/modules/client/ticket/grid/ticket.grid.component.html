<div class="row">
    <div class="col-sm-12" *ngIf="tickets">

        <!--begin:: Widgets/Support Tickets -->
        <div class="kt-portlet kt-portlet--height-fluid">
            <div class="kt-portlet__head">
                <div class="kt-portlet__head-label">
                    <h3 class="kt-portlet__head-title">
                        Support Tickets
                    </h3>
                    <a class="btn btn-label-warning btn-bold btn-sm btn-icon-h kt-margin-l-10" *ngIf="!adminController" (click)="navigateTicket()">
                        Create a Ticket
                    </a>
                </div>
                <div class="kt-portlet__head-toolbar">
                    <div class="kt-portlet__head-actions">
                        <a class="btn btn-outline-light btn-icon-md btn-secondary" [ngClass]="{'active': ticketStatusType == null }" (click)="filterTickets()">
                            <i class="flaticon-squares-1"></i> All Ticket
                        </a>
                        <a class="btn btn-outline-light btn-icon-md btn-secondary" [ngClass]="{'active': ticketStatusType == TicketStatusType.Open }" (click)="filterTickets(TicketStatusType.Open)">
                            <i class="flaticon2-talk"></i> Open
                        </a>
                        <a class="btn btn-outline-light btn-icon-md btn-secondary" [ngClass]="{'active': ticketStatusType == TicketStatusType.Closed }" (click)="filterTickets(TicketStatusType.Closed)">
                            <i class="flaticon2-correct"></i> Closed
                        </a>
                    </div>
                </div>
            </div>
            <div class="kt-portlet__body">
                <div class="kt-widget3">
                    <div class="kt-widget3__item" *ngFor="let item of tickets" (click)="navigateTicket(item.Id)">
                        <div class="kt-widget3__body">
                            <p style="display: flex; align-items: center;">
                                <span class="tooltips" [attr.data-original-title]="item.Category.Name" [innerHTML]="item.Category.SvgIcon | sanitizeHtml">
                                </span>&nbsp;&nbsp;
                                <a class="kt-widget3__text title"> {{ item.Title }} </a>&nbsp;
                                <span class="kt-badge kt-badge--rounded" [ngClass]="item.StatusType == TicketStatusType.Open ? 'kt-badge--success' : 'kt-badge--warning'">
                                    {{ TicketStatusType[item.StatusType] }}
                                </span>
                                <span class="kt-badge kt-badge--unified-success kt-badge--rounded" *ngIf="item.PriorityType">
                                    <span>
                                        <svg *ngIf="item.PriorityType == TicketPriorityType.Low" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <polygon id="Shape" points="0 0 24 0 24 24 0 24" />
                                                <path d="M8.53512878,14 C9.22674762,12.8043973 10.5194353,12 12,12 C13.4805647,12 14.7732524,12.8043973 15.4648712,14 L8.53512878,14 Z M16,16 L8,16 L16,16 Z M4,16 L20,16 C20.5522847,16 21,16.4477153 21,17 L21,17 C21,17.5522847 20.5522847,18 20,18 L4,18 C3.44771525,18 3,17.5522847 3,17 L3,17 C3,16.4477153 3.44771525,16 4,16 Z" id="Combined-Shape" fill="#000000" fill-rule="nonzero" />
                                                <path d="M16.0606602,8.87132034 L17.1213203,7.81066017 C17.7071068,7.22487373 18.6568542,7.22487373 19.2426407,7.81066017 C19.8284271,8.39644661 19.8284271,9.34619408 19.2426407,9.93198052 L18.1819805,10.9926407 C17.5961941,11.5784271 16.6464466,11.5784271 16.0606602,10.9926407 C15.4748737,10.4068542 15.4748737,9.45710678 16.0606602,8.87132034 Z M12,4.5 C12.8284271,4.5 13.5,5.17157288 13.5,6 L13.5,7.5 C13.5,8.32842712 12.8284271,9 12,9 C11.1715729,9 10.5,8.32842712 10.5,7.5 L10.5,6 C10.5,5.17157288 11.1715729,4.5 12,4.5 Z M4.81066017,7.81066017 C5.39644661,7.22487373 6.34619408,7.22487373 6.93198052,7.81066017 L7.99264069,8.87132034 C8.57842712,9.45710678 8.57842712,10.4068542 7.99264069,10.9926407 C7.40685425,11.5784271 6.45710678,11.5784271 5.87132034,10.9926407 L4.81066017,9.93198052 C4.22487373,9.34619408 4.22487373,8.39644661 4.81066017,7.81066017 Z" id="Oval" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                            </g>
                                        </svg>
                                        <svg *ngIf="item.PriorityType == TicketPriorityType.Normal" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <polygon id="Shape" points="0 0 24 0 24 24 0 24" />
                                                <path d="M8,16 C8,13.790861 9.790861,12 12,12 C14.209139,12 16,13.790861 16,16 C16,16 8,16 8,16 Z M4,18 L20,18 C20.5522847,18 21,18.4477153 21,19 C21,19.5522847 20.5522847,20 20,20 L4,20 C3.44771525,20 3,19.5522847 3,19 C3,18.4477153 3.44771525,18 4,18 Z" id="Combined-Shape" fill="#000000" fill-rule="nonzero" />
                                                <path d="M19.5,13 L21,13 C21.8284271,13 22.5,13.6715729 22.5,14.5 C22.5,15.3284271 21.8284271,16 21,16 L19.5,16 C18.6715729,16 18,15.3284271 18,14.5 C18,13.6715729 18.6715729,13 19.5,13 Z M16.0606602,8.87132034 L17.1213203,7.81066017 C17.7071068,7.22487373 18.6568542,7.22487373 19.2426407,7.81066017 C19.8284271,8.39644661 19.8284271,9.34619408 19.2426407,9.93198052 L18.1819805,10.9926407 C17.5961941,11.5784271 16.6464466,11.5784271 16.0606602,10.9926407 C15.4748737,10.4068542 15.4748737,9.45710678 16.0606602,8.87132034 Z M3,13 L4.5,13 C5.32842712,13 6,13.6715729 6,14.5 C6,15.3284271 5.32842712,16 4.5,16 L3,16 C2.17157288,16 1.5,15.3284271 1.5,14.5 C1.5,13.6715729 2.17157288,13 3,13 Z M12,4.5 C12.8284271,4.5 13.5,5.17157288 13.5,6 L13.5,7.5 C13.5,8.32842712 12.8284271,9 12,9 C11.1715729,9 10.5,8.32842712 10.5,7.5 L10.5,6 C10.5,5.17157288 11.1715729,4.5 12,4.5 Z M4.81066017,7.81066017 C5.39644661,7.22487373 6.34619408,7.22487373 6.93198052,7.81066017 L7.99264069,8.87132034 C8.57842712,9.45710678 8.57842712,10.4068542 7.99264069,10.9926407 C7.40685425,11.5784271 6.45710678,11.5784271 5.87132034,10.9926407 L4.81066017,9.93198052 C4.22487373,9.34619408 4.22487373,8.39644661 4.81066017,7.81066017 Z" id="Oval" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                            </g>
                                        </svg>
                                        <svg *ngIf="item.PriorityType == TicketPriorityType.Hight" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24" />
                                                <path d="M12,15 C10.3431458,15 9,13.6568542 9,12 C9,10.3431458 10.3431458,9 12,9 C13.6568542,9 15,10.3431458 15,12 C15,13.6568542 13.6568542,15 12,15 Z" id="Oval-8" fill="#000000" fill-rule="nonzero" />
                                                <path d="M19.5,10.5 L21,10.5 C21.8284271,10.5 22.5,11.1715729 22.5,12 C22.5,12.8284271 21.8284271,13.5 21,13.5 L19.5,13.5 C18.6715729,13.5 18,12.8284271 18,12 C18,11.1715729 18.6715729,10.5 19.5,10.5 Z M16.0606602,5.87132034 L17.1213203,4.81066017 C17.7071068,4.22487373 18.6568542,4.22487373 19.2426407,4.81066017 C19.8284271,5.39644661 19.8284271,6.34619408 19.2426407,6.93198052 L18.1819805,7.99264069 C17.5961941,8.57842712 16.6464466,8.57842712 16.0606602,7.99264069 C15.4748737,7.40685425 15.4748737,6.45710678 16.0606602,5.87132034 Z M16.0606602,18.1819805 C15.4748737,17.5961941 15.4748737,16.6464466 16.0606602,16.0606602 C16.6464466,15.4748737 17.5961941,15.4748737 18.1819805,16.0606602 L19.2426407,17.1213203 C19.8284271,17.7071068 19.8284271,18.6568542 19.2426407,19.2426407 C18.6568542,19.8284271 17.7071068,19.8284271 17.1213203,19.2426407 L16.0606602,18.1819805 Z M3,10.5 L4.5,10.5 C5.32842712,10.5 6,11.1715729 6,12 C6,12.8284271 5.32842712,13.5 4.5,13.5 L3,13.5 C2.17157288,13.5 1.5,12.8284271 1.5,12 C1.5,11.1715729 2.17157288,10.5 3,10.5 Z M12,1.5 C12.8284271,1.5 13.5,2.17157288 13.5,3 L13.5,4.5 C13.5,5.32842712 12.8284271,6 12,6 C11.1715729,6 10.5,5.32842712 10.5,4.5 L10.5,3 C10.5,2.17157288 11.1715729,1.5 12,1.5 Z M12,18 C12.8284271,18 13.5,18.6715729 13.5,19.5 L13.5,21 C13.5,21.8284271 12.8284271,22.5 12,22.5 C11.1715729,22.5 10.5,21.8284271 10.5,21 L10.5,19.5 C10.5,18.6715729 11.1715729,18 12,18 Z M4.81066017,4.81066017 C5.39644661,4.22487373 6.34619408,4.22487373 6.93198052,4.81066017 L7.99264069,5.87132034 C8.57842712,6.45710678 8.57842712,7.40685425 7.99264069,7.99264069 C7.40685425,8.57842712 6.45710678,8.57842712 5.87132034,7.99264069 L4.81066017,6.93198052 C4.22487373,6.34619408 4.22487373,5.39644661 4.81066017,4.81066017 Z M4.81066017,19.2426407 C4.22487373,18.6568542 4.22487373,17.7071068 4.81066017,17.1213203 L5.87132034,16.0606602 C6.45710678,15.4748737 7.40685425,15.4748737 7.99264069,16.0606602 C8.57842712,16.6464466 8.57842712,17.5961941 7.99264069,18.1819805 L6.93198052,19.2426407 C6.34619408,19.8284271 5.39644661,19.8284271 4.81066017,19.2426407 Z" id="Oval" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                            </g>
                                        </svg>
                                    </span>&nbsp;&nbsp;
                                    <span *ngIf="item.PriorityType">{{ TicketPriorityType[item.PriorityType] }}</span>
                                </span>
                                <span class="kt-badge kt-badge--unified-success kt-badge--rounded" *ngIf="item.Count">
                                    <span><i class="flaticon-chat"></i></span>&nbsp;&nbsp;
                                    <span>{{ item.Count }}</span>
                                </span>
                            </p>
                            <p class="kt-widget3__text information">
                                <span>
                                    Ticket opened on {{ item.DateTime | date: 'dd MMM yyyy' }} by&nbsp;
                                </span>
                                <span *ngIf="item.User">
                                    {{ item.User.UserName }}
                                </span>
                            </p>
                        </div>
                        <div class="kt-widget3__right">
                            <div class="form-group" *ngIf="item.AssignTo">
                                <div class="ticket-title">Assign to</div>
                                {{ item.AssignTo.UserName }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dataTables_wrapper">
                <div class="dataTables_paginate paging_simple_numbers" *ngIf="paging">
                    <ul class="pagination" style="visibility: visible;">
                        <li class="paginate_button page-item previous" *ngIf="paging.index > 1"><a class="page-link" title="First" (click)="navigate(1)"><i class="la la-angle-double-left"></i></a></li>
                        <li class="paginate_button page-item previous" *ngIf="paging.index > 1"><a class="page-link" title="Prev" (click)="navigate(paging.index - 1)"><i class="la la-angle-left"></i></a></li>
                        <li class="paginate_button page-item" [ngClass]="{'active':paging.index == item}" *ngFor="let item of numbers">
                            <a class="page-link" (click)="navigate(item)">{{ item }}</a>
                        </li>
                        <li class="paginate_button page-item next" *ngIf="paging.pages > paging.index"><a class="page-link" title="Next" (click)="navigate(paging.index + 1)"><i class="la la-angle-right"></i></a></li>
                        <li class="paginate_button page-item next" *ngIf="paging.pages > paging.index"><a class="page-link" title="Last" (click)="navigate(paging.pages)"><i class="la la-angle-double-right"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!--end:: Widgets/Support Tickets -->
    </div>
    <mvc-loading-component [text]="loadingText" *ngIf="loading"></mvc-loading-component>
</div>